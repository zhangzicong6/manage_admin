(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b132908"],{3733:function(t,e,a){"use strict";var s=a("7383"),i=a.n(s);i.a},"4d2b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-setting"},[a("h2",{staticClass:"title"},[t._v("\n        "+t._s("修改配置"==t.$route.name?"修改配置规则":"配置新规则")+"\n    ")]),a("Form",{staticClass:"form-group",attrs:{model:t.settingData,"label-position":"right","label-width":100}},[a("FormItem",{attrs:{label:"类型",prop:"type"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:t.settingData.type,callback:function(e){t.$set(t.settingData,"type",e)},expression:"settingData.type"}},[a("Radio",{attrs:{label:0}},[t._v("文本")]),a("Radio",{attrs:{label:1}},[t._v("点击")]),a("Radio",{attrs:{label:2}},[t._v("关注")])],1)],1),0==t.settingData.type?a("FormItem",{attrs:{label:"用户回复文本",prop:"text"}},[a("Input",{attrs:{size:"large",type:"text",placeholder:"请输入用户回复文本"},model:{value:t.settingData.text,callback:function(e){t.$set(t.settingData,"text",e)},expression:"settingData.text"}})],1):1==t.settingData.type?a("FormItem",{attrs:{label:"点击关键词",prop:"key"}},[a("Input",{attrs:{size:"large",type:"text",placeholder:"请输入点击关键词"},model:{value:t.settingData.key,callback:function(e){t.$set(t.settingData,"key",e)},expression:"settingData.key"}})],1):t._e(),a("FormItem",{attrs:{label:"类型",prop:"replyType"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:t.settingData.replyType,callback:function(e){t.$set(t.settingData,"replyType",e)},expression:"settingData.replyType"}},[a("Radio",{attrs:{label:0}},[t._v("文本/图文")]),a("Radio",{attrs:{label:1}},[t._v("图片")])],1)],1),0==t.settingData.replyType?a("FormItem",{attrs:{label:"消息模板ID",prop:"msgId"}},[a("Input",{attrs:{size:"large",type:"text",placeholder:"请输入消息模板ID"},model:{value:t.settingData.msgId,callback:function(e){t.$set(t.settingData,"msgId",e)},expression:"settingData.msgId"}})],1):1==t.settingData.replyType?a("FormItem",{attrs:{label:"图片",prop:"showUrl"}},[a("Upload",{attrs:{action:"http://test.oorggt.top/reply/upload","show-upload-list":!1,name:"imageFile","on-success":t.handleSuccess}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("点击上传")]),a("br"),t.imgUrl?a("img",{staticStyle:{"margin-top":"10px"},attrs:{src:t.imgUrl,alt:"",width:"200"}}):t._e()],1)],1):t._e(),a("FormItem",[a("Button",{staticClass:"edit-btn",attrs:{size:"large",type:"primary"},on:{click:t.submitForm}},[t._v("提交")]),a("Button",{staticClass:"edit-btn",attrs:{size:"large",type:"error"},on:{click:t.resetForm}},[t._v("重置")]),a("Button",{staticClass:"edit-btn",attrs:{size:"large",type:"warning"},on:{click:t.cancel}},[t._v("取消")])],1)],1)],1)},i=[],r=(a("7f7f"),{data:function(){return{settingData:{type:0,replyType:0},imgUrl:"",url:"",code:null}},mounted:function(){this.code=this.$route.query.code,"修改配置"===this.$route.name&&(this.settingData=this.$route.query.data,this.url=this.settingData.url,this.imgUrl=this.settingData.showUrl)},methods:{handleSuccess:function(t,e){this.url="./public/uploads/"+t.filename,this.imgUrl="http://test.oorggt.top/uploads/"+t.filename},cancel:function(){this.resetForm(),this.$router.push({name:"配置公号",params:{code:this.code}})},resetForm:function(){this.settingData={type:0,replyType:0},this.imgUrl=this.url=""},submitForm:function(){var t=this;"配置新规则"===this.$route.name?this.$axios.post("/reply/create",{code:this.code,replyType:this.settingData.replyType,type:this.settingData.type,url:this.url,showUrl:this.imgUrl,text:this.settingData.text,key:this.settingData.key,msgId:this.settingData.msgId}).then(function(e){e.data&&(t.$Message.info("创建成功"),t.$router.push({name:"配置公号",params:{code:t.code}}),t.resetForm())}):"修改配置"===this.$route.name&&this.$axios.post("/reply/update",{code:this.code,replyType:this.settingData.replyType,id:this.settingData._id,type:this.settingData.type,text:this.settingData.text,url:this.url,showUrl:this.imgUrl,key:this.settingData.key,msgId:this.settingData.msgId}).then(function(e){e.data&&(t.$Message.info("修改成功"),t.$router.push({name:"配置公号",params:{code:t.code}}),t.resetForm())})}}}),o=r,l=(a("3733"),a("2877")),n=Object(l["a"])(o,s,i,!1,null,"16c936c6",null);n.options.__file="editSetting.vue";e["default"]=n.exports},7383:function(t,e,a){}}]);
//# sourceMappingURL=chunk-2b132908.66879290.js.map